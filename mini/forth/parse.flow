import mini/commands/db;
import text/serialize;
import mini/forth/stack;
import mini/forth/eval;
import mini/exp/value;

export {
	parseMiniFile(file : string, path : string, db : MiniDb) -> MiniDb;
}

parseMiniFile(file : string, path : string, db : MiniDb) -> MiniDb {
	content = getFileContent(path);
	lines = strSplit(content, "\n");
	fold(lines, db, \acc, line -> {
		miniEvalForth(file, acc, line)
	});
}
